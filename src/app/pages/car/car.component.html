<div class="container-fluid knx-container--fullwidth knx-container--gray">
  <div class="container">
    <ol *ngIf="formSteps" class="knx-step-navigation">
      <li *ngFor="let step of formSteps; let i = index;"
        class="knx-step-navigation__step"
        [ngClass]="{ 'knx-step-navigation__step--current': i === 0 }">{{ step.title }}</li>
    </ol>
  </div>
</div>


<div class="container">
  <div class="row">
    <div class="col-md-12">

      Current Token: <pre>{{token}}</pre>.

      <button type="button" (click)="refreshToken()" class="knx-button"><i class="knx-icon-check"></i> REFRESH TOKEN</button>
    </div>
  </div>
</div>

<div class="container">

  <div class="row">
    <div class="col-md-8">
      <div class="car-forms__container">

        <div class="car-form" [ngSwitch]="currentFormStep">
          <knx-car-detail-form
            *ngSwitchCase="'carDetails'"
            (licensePlateChange)="getCarInfo($event)"
            (coverageDetailsChange)="getCoverages($event)"
            (formValid)="goToNextStep($event)"
            [coverages]="coverages"
            [isCoverageLoading]="isCoverageLoading">
          </knx-car-detail-form>

          <knx-car-result-form
            *ngSwitchCase="'carResults'"
            [insurances]="insurances">
          </knx-car-result-form>

        </div>

        <div class="cx-form-group cx-form-group--space-between">
          <button class="knx-button knx-button--link knx-button--back" (click)="goToPreviousStep()">Terug</button>
          <button class="knx-button knx-button--primary knx-button--arrow" (click)="goToNextStep()">Volgende</button>
        </div>

      </div>
    </div>
    <div class="col-md-4">
      <knx-chat-stream
        [options]="chatConfig"
        [messages]="chatMessages">
      </knx-chat-stream>
    </div>
  </div>
</div>
