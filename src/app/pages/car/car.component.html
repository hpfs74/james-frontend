<div class="container-fluid knx-container--fullwidth knx-container--gray">
  <div class="container">
    <ol *ngIf="formSteps" class="knx-step-navigation">
      <li *ngFor="let step of formSteps; let i = index;"
        class="knx-step-navigation__step"
        [ngClass]="{ 'knx-step-navigation__step--current': getCurrentStepIndex(i) }">{{ step.title }}</li>
    </ol>
  </div>
</div>

<!-- TODO: remove me when refresh implemented -->
<div #el style="position:absolute;top:50px;right:20px;width:300px;background: yellow;border:1px solid red;padding:10px">
  <small>Current Token: <br><textarea style="width:100%">{{token}}</textarea></small><br>
  <a style="margin-right:10px" (click)="refreshToken()">refresh</a>
  <a (click)="el.style.display = 'none'">hide</a>
</div>

<div class="container">

  <div class="row">
    <div class="col-md-8">
      <div class="car-forms__container">

        <div class="car-form" [ngSwitch]="currentFormStep">
          <knx-car-detail-form
            *ngSwitchCase="'carDetails'"
            (licensePlateChange)="getCarInfo($event)"
            (coverageDetailsChange)="getCoverages($event)"
            (formValid)="goToNextStep($event)"
            [coverages]="coverages"
            [isCoverageLoading]="isCoverageLoading">
          </knx-car-detail-form>

          <knx-car-result-form
            *ngSwitchCase="'carResults'"
            [insurances]="insurances"
            [isInsuranceLoading]="isInsuranceLoading"
            [car]="myCar">
          </knx-car-result-form>

        </div>

        <div class="cx-form-group cx-form-group--space-between">
          <button class="knx-button knx-button--link knx-button--back" (click)="goToPreviousStep()">Terug</button>
          <button class="knx-button knx-button--secondary knx-button--arrow" (click)="goToNextStep()">Volgende</button>
        </div>

      </div>
    </div>
    <div class="col-md-4">
      <knx-chat-stream
        [options]="chatConfig"
        [messages]="chatMessages">
      </knx-chat-stream>
    </div>
  </div>
</div>
