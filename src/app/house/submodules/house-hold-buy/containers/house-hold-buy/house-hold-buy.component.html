<div class="container-fluid knx-container--fullwidth knx-container--gray knx-container-stepnavigation"
     knxBackdropBlur [enableBlur]="knxChatStream.chatExpanded">
  <div class="container">
    <knx-step-navigation *ngIf="knxWizardService.currentStepIndex !== 3"
                         [steps]="formSteps"
                         [currentStep]="knxWizardService.currentStepIndex"
                         [clickable]="true"
                         (stepChange)="goToStep($event);">
    </knx-step-navigation>
  </div>
</div>

<div class="container knx-house-hold-advice" [ngClass]="getStepClass(knxWizardService.currentStepIndex)" knxBackdropBlur
     [enableBlur]="knxChatStream.chatExpanded">
  <knx-wizard-rx>

    <div class="knx-wizard__sidebar" [class.knx-wizard__sidebar--sticky]="false"
         #knxWizardSidebar>
      <knx-chat-stream #knxChatStream
                       [options]="chatConfig$ | async"
                       [messages]="chatMessages$ | async">
        <ng-container>
          <knx-card *ngIf="knxWizardService.currentStepIndex === 1">
            <knx-insurance-combined-price
              [IncludeBTW]="true"
              [Insurance]="[(selectedInsurances$ | async)]">
            </knx-insurance-combined-price>
          </knx-card>
        </ng-container>

      </knx-chat-stream>

    </div>
  </knx-wizard-rx>
</div>
